{"ast":null,"code":"import _slicedToArray from\"/home/amir/Desktop/New File/IMS/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/home/amir/Desktop/New File/IMS/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import Login from'./components/login/Login_Form';import React,{useState}from'react';import{BrowserRouter,Switch,Route,Redirect}from'react-router-dom';import{createGlobalStyle}from\"styled-components\";import Dashboard from'./components/dashboard/Dashboard';import LogOut from'./components/logout/Logout';// import SepModal from './components/table/SepModal'\n// import Modal from './components/modal/modal'\nimport AuthApi from'./components/Authapi';// import Cookies from 'js-cookie';\nimport HODDashboard from'./components/hod_dashboard/Hod_dashboard';// import Request_Form from './components/Request_Form/Request_Form'\nimport PurchaseDashboard from'./components/purchaseDashboard/Purchase_dashboard';// import axios from 'axios'\nimport MDashboard from'./components/managerDashboard/Manager_dashboard';import AccountsManagerDetails from'./components/RequestDetails/Accounts_manager';import ManagerAdminDetails from'./components/RequestDetails/Manager_admin';import DirectorDetails from'./components/RequestDetails/Director';import StoreDashboard from'./components/StoreDashboard/Store_Dashboard';import Inventory from'./components/inventory/Inventory';import RecieveItems from'./components/recieve_items/Recieve_Items';import IssueItems from'./components/issue/Issue_items';import Cookie from'universal-cookie';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GlobalStyle=createGlobalStyle(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n@import url('https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700&display=swap');\\n    *{\\n        font-family: 'Merriweather', sans-serif;\\n   }\\n    \\n\"])));function App(){var cookie=new Cookie();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),token=_useState2[0],settoken=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),UserRole=_useState4[0],setRole=_useState4[1];console.log(token);function CheckUser(){// await  axios({\n//     method: \"POST\",\n//     withCredentials: true,\n//     url: \"http://localhost:5000/loggedin_user\",\n//   }).then((res) => {\n//     if(res.data)\n//     {\n//         if(res.data.code === 404)\n//         {\n// settoken(false);\n// setRole(\"\");\n//         }\n//         else\n//         {\n//             settoken(true);\n//             setRole(res.data.user.user.Designation);\n//         }\n//     }\n// });\n// let tok = localStorage.getItem('token');\nvar tok=cookie.get('token');if(tok){console.log('token found');settoken(true);var u=cookie.get('user');// setRole(localStorage.getItem('user'));\nsetRole(u);}else{console.log('No token found');settoken(false);setRole(\"\");}}React.useEffect(function(){CheckUser();// const user  = Cookies.get('user');\n// if (user) {\n//     settoken(true);\n// }\n// else\n// {\n//     settoken(false);\n// }\n},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(GlobalStyle,{}),/*#__PURE__*/_jsx(AuthApi.Provider,{value:{token:token,settoken:settoken,UserRole:UserRole,setRole:setRole,CheckUser:CheckUser},children:/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(Routes,{})})})]});}var Routes=function Routes(){var cookie=new Cookie();var Auth=React.useContext(AuthApi);return/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",render:function render(){// let tok = localStorage.getItem('token');\nvar tok=cookie.get('token');if(tok){console.log('token found');Auth.settoken(true);// Auth.setRole(localStorage.getItem('user'));\nAuth.setRole(cookie.get('user'));}else{console.log('No token found');Auth.settoken(false);Auth.setRole(\"\");}console.log('Auth Token ',Auth.token);console.log('Auth User Role ',Auth.userRole);// Auth.token === null ? (<Login />) :  <Redirect to=\"/dashboard\"/>\nif(Auth.token===false){console.log(\"here\");return/*#__PURE__*/_jsx(Login,{});}else if(Auth.token!==false&&Auth.UserRole==='General'){return/*#__PURE__*/_jsx(Redirect,{to:\"/dashboard\"});}else if(Auth.token!==false&&Auth.UserRole==='Purchase'){return/*#__PURE__*/_jsx(Redirect,{to:\"/purchase\"});}else if(Auth.token!==false&&Auth.UserRole==='Head'){return/*#__PURE__*/_jsx(Redirect,{to:\"/hoddashboard\"});}else if(Auth.token!==false&&(Auth.UserRole==='Accounts'||Auth.UserRole===\"Admin\"||Auth.UserRole===\"Director\")){return/*#__PURE__*/_jsx(Redirect,{to:\"/managerdashboard\"});}else if(Auth.token!==false&&Auth.UserRole==='Store'){return/*#__PURE__*/_jsx(Redirect,{to:\"/storedashboard\"});}}}),/*#__PURE__*/_jsx(Route,{path:\"/inventory\",render:function render(){if(Auth.token!==false&&Auth.UserRole===\"Store\"){return/*#__PURE__*/_jsx(Inventory,{});}else{return/*#__PURE__*/_jsx(Redirect,{exact:true,to:\"/\"});}}}),/*#__PURE__*/_jsx(Route,{path:\"/:id/issuerequest\",render:function render(){if(Auth.token!==false&&Auth.UserRole===\"Store\"){return/*#__PURE__*/_jsx(IssueItems,{});}else{return/*#__PURE__*/_jsx(Redirect,{exact:true,to:\"/\"});}}}),/*#__PURE__*/_jsx(Route,{path:\"/:id/accountsrequest\",render:function render(){if(Auth.token!==false&&Auth.UserRole===\"Accounts\"){return/*#__PURE__*/_jsx(AccountsManagerDetails,{});}else{return/*#__PURE__*/_jsx(Redirect,{exact:true,to:\"/\"});}}}),/*#__PURE__*/_jsx(Route,{path:\"/recieveitems\",render:function render(){if(Auth.token!==false&&Auth.UserRole===\"Store\"){return/*#__PURE__*/_jsx(RecieveItems,{});}else{return/*#__PURE__*/_jsx(Redirect,{exact:true,to:\"/\"});}}}),/*#__PURE__*/_jsx(Route,{path:\"/:id/adminrequest\",render:function render(){if(Auth.token!==false&&Auth.UserRole===\"Admin\"){return/*#__PURE__*/_jsx(ManagerAdminDetails,{});}else{return/*#__PURE__*/_jsx(Redirect,{exact:true,to:\"/\"});}}}),/*#__PURE__*/_jsx(Route,{path:\"/:id/directorrequest\",render:function render(){if(Auth.token!==false&&Auth.UserRole===\"Director\"){return/*#__PURE__*/_jsx(DirectorDetails,{});}else{return/*#__PURE__*/_jsx(Redirect,{exact:true,to:\"/\"});}}}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",render:function render(){console.log('Auth Token ',Auth.token);console.log('Auth User Role ',Auth.userRole);if(Auth.token!==false&&(Auth.UserRole==='General'||Auth.UserRole==='Head')){return/*#__PURE__*/_jsx(Dashboard,{});}else{console.log('here');return/*#__PURE__*/_jsx(Redirect,{exact:true,to:\"/\"});}}}),/*#__PURE__*/_jsx(Route,{path:\"/hoddashboard\",render:function render(){if(Auth.token!==false&&Auth.UserRole==='Head'){return/*#__PURE__*/_jsx(HODDashboard,{});}else{return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}}}),/*#__PURE__*/_jsx(Route,{path:\"/logout\",render:function render(){if(Auth.token!==false){return/*#__PURE__*/_jsx(LogOut,{});}else{return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}}}),/*#__PURE__*/_jsx(Route,{path:\"/purchase\",render:function render(){if(Auth.token!==false&&Auth.UserRole==='Purchase'){return/*#__PURE__*/_jsx(PurchaseDashboard,{});}else{return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}}}),/*#__PURE__*/_jsx(Route,{path:\"/managerdashboard\",render:function render(){if(Auth.token!==false&&(Auth.UserRole==='Admin'||Auth.UserRole===\"Accounts\"||Auth.UserRole===\"Director\")){return/*#__PURE__*/_jsx(MDashboard,{});}else{return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}}}),/*#__PURE__*/_jsx(Route,{path:\"/storedashboard\",render:function render(){if(Auth.token!==false&&Auth.UserRole==='Store'){return/*#__PURE__*/_jsx(StoreDashboard,{});}else{return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}}}),/*#__PURE__*/_jsx(Route,{path:\"/*\",render:function render(){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}})]});};// const ProtectRoute = ({token, comp: Component, ...rest})=>{\n//     // const Auth = React.useContext(AuthApi);\n//     return (\n//         <Route \n//         {...rest}\n//         render={() =>{ \n//          if (token)\n//             {\n//                 console.log(\"Token is true\")\n//                 return <Component />\n//             }\n//         else\n//             {\n//                 console.log(\"Token is not true\")\n//                 return (<Redirect to='/' exact/>)\n//             }    \n//         }\n//     }\n//         />\n//     )\n// }\n// const ProtectLogin = ({token, components: Component, ...rest})=>{\n//     return (\n//         <Route \n//         {...rest}\n//         render={() => token ? (\n//             <Redirect to='/dashboard'/>    \n//         ):\n//         (\n//             <Component />\n//         )\n//     }\n//         />\n//     )\n// }\nexport default App;","map":{"version":3,"sources":["/home/amir/Desktop/New File/IMS/client/src/App.js"],"names":["Login","React","useState","BrowserRouter","Switch","Route","Redirect","createGlobalStyle","Dashboard","LogOut","AuthApi","HODDashboard","PurchaseDashboard","MDashboard","AccountsManagerDetails","ManagerAdminDetails","DirectorDetails","StoreDashboard","Inventory","RecieveItems","IssueItems","Cookie","GlobalStyle","App","cookie","token","settoken","UserRole","setRole","console","log","CheckUser","tok","get","u","useEffect","Routes","Auth","useContext","userRole"],"mappings":"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","sourcesContent":["import Login from './components/login/Login_Form';\nimport React, { useState } from 'react';\nimport {BrowserRouter, Switch, Route, Redirect} from 'react-router-dom';\nimport { createGlobalStyle } from \"styled-components\";\nimport Dashboard from './components/dashboard/Dashboard';\nimport LogOut from './components/logout/Logout'\n// import SepModal from './components/table/SepModal'\n// import Modal from './components/modal/modal'\nimport AuthApi from './components/Authapi'\n// import Cookies from 'js-cookie';\nimport HODDashboard from './components/hod_dashboard/Hod_dashboard'\n// import Request_Form from './components/Request_Form/Request_Form'\nimport PurchaseDashboard from './components/purchaseDashboard/Purchase_dashboard'\n// import axios from 'axios'\nimport MDashboard from './components/managerDashboard/Manager_dashboard'\nimport AccountsManagerDetails from './components/RequestDetails/Accounts_manager'\nimport ManagerAdminDetails from './components/RequestDetails/Manager_admin'\nimport DirectorDetails from './components/RequestDetails/Director'\nimport StoreDashboard from './components/StoreDashboard/Store_Dashboard'\nimport Inventory from './components/inventory/Inventory'\nimport RecieveItems from './components/recieve_items/Recieve_Items'\nimport IssueItems from './components/issue/Issue_items'\nimport Cookie from 'universal-cookie'\nconst GlobalStyle = createGlobalStyle`\n@import url('https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700&display=swap');\n    *{\n        font-family: 'Merriweather', sans-serif;\n   }\n    \n`; \nfunction App() \n{\n    const cookie = new Cookie()\n    const [token , settoken] = useState(false)\n    const [UserRole , setRole] = useState(false)\n\n    console.log(token)\n\n    function CheckUser()\n    {\n        // await  axios({\n        //     method: \"POST\",\n        //     withCredentials: true,\n        //     url: \"http://localhost:5000/loggedin_user\",\n        //   }).then((res) => {\n\n        //     if(res.data)\n        //     {\n        //         if(res.data.code === 404)\n        //         {\n                    // settoken(false);\n                    // setRole(\"\");\n        //         }\n        //         else\n        //         {\n        //             settoken(true);\n        //             setRole(res.data.user.user.Designation);\n        //         }\n        //     }\n            \n\n        // });\n\n            \n        // let tok = localStorage.getItem('token');\n        let tok = cookie.get('token');\n\n        if (tok) {\n\n            console.log('token found');\n            settoken(true); \n            var u = cookie.get('user');\n            // setRole(localStorage.getItem('user'));\n            setRole(u);\n        }\n        else\n        {\n            console.log('No token found');\n            settoken(false); setRole(\"\");\n        }\n\n\n\n\n\n\n    }\n\n\n\n    React.useEffect(()=> {\n        \n        CheckUser();\n\n        \n        // const user  = Cookies.get('user');\n        // if (user) {\n        //     settoken(true);\n        // }\n        // else\n        // {\n        //     settoken(false);\n        // }\n    },[])\n\n        return ( \n        <>\n        <GlobalStyle/>\n            <AuthApi.Provider value = {{token, settoken, UserRole, setRole, CheckUser}}>\n            <BrowserRouter>\n                <Routes />\n            </BrowserRouter>   \n            </AuthApi.Provider>    \n        </>\n    );\n}\n\nconst Routes = () =>{\n    const cookie = new Cookie()\n    const Auth = React.useContext(AuthApi);\n    return(         \n           \n           <Switch>\n                <Route exact path=\"/\" render={() => {\n                    // let tok = localStorage.getItem('token');\n                    let tok = cookie.get('token');\n                    if (tok) {\n            \n                        console.log('token found');\n                        Auth.settoken(true); \n                        // Auth.setRole(localStorage.getItem('user'));\n                        Auth.setRole(cookie.get('user'));\n\n                    }\n                    else\n                    {\n                        console.log('No token found');\n                        Auth.settoken(false); Auth.setRole(\"\");\n                    }\n            \n            \n                    console.log('Auth Token ', Auth.token);\n                    console.log('Auth User Role ', Auth.userRole);\n\n                    // Auth.token === null ? (<Login />) :  <Redirect to=\"/dashboard\"/>\n                        \n\n                    if (Auth.token === false)   \n                    {\n                        console.log(\"here\") ;\n                        return <Login /> \n                    }\n                    else if(Auth.token !== false && Auth.UserRole === 'General')   \n                    {\n                        return <Redirect to=\"/dashboard\"/>\n                    }\n                    else if(Auth.token !== false && Auth.UserRole === 'Purchase')   \n                    {\n                        return <Redirect to=\"/purchase\"/>\n                    }\n                    else if(Auth.token !== false && Auth.UserRole === 'Head')   \n                    {\n                        return <Redirect to=\"/hoddashboard\"/>\n                    }\n                    else if(Auth.token !== false && (Auth.UserRole === 'Accounts' || Auth.UserRole === \"Admin\" || Auth.UserRole === \"Director\") )\n                    {\n                        return <Redirect to=\"/managerdashboard\"/>\n                    }\n                    else if(Auth.token !== false && Auth.UserRole === 'Store'  )\n                    {\n                        return <Redirect to=\"/storedashboard\"/>\n                    }\n                    \n                    \n                    \n                       \n                       \n                }}>\n\n\n                    \n                </Route>  \n                {/* <ProtectLogin path = '/' exact components = {Login} token = {Auth.token} /> */}\n\n                <Route path =\"/inventory\"\n                render={() => {\n                    if (Auth.token !== false && (Auth.UserRole === \"Store\"))\n                    { return <Inventory/>}\n                    else\n                    { return <Redirect exact to=\"/\" ></Redirect>}\n\n\n                }}>\n                </Route>\n                {/* <Route path =\"/:itemName/issuerequest\"\n                render={() => {\n                    if (Auth.token !== false && (Auth.UserRole === \"Store\"))\n                    { return <IssueItems/>}\n                    else\n                    { return <Redirect exact to=\"/\" ></Redirect>}\n\n\n                }}>\n                </Route> */}\n                <Route path =\"/:id/issuerequest\"\n                render={() => {\n                    if (Auth.token !== false && (Auth.UserRole === \"Store\"))\n                    { return <IssueItems/>}\n                    else\n                    { return <Redirect exact to=\"/\" ></Redirect>}\n\n\n                }}>\n                </Route>\n\n                <Route path =\"/:id/accountsrequest\"\n                render={() => {\n                    if (Auth.token !== false && (Auth.UserRole === \"Accounts\"))\n                    { return <AccountsManagerDetails/>}\n                    else\n                    { return <Redirect exact to=\"/\" ></Redirect>}\n\n\n                }}>\n                </Route>\n\n                <Route path =\"/recieveitems\"\n                render={() => {\n                    if (Auth.token !== false && (Auth.UserRole === \"Store\"))\n                    { return <RecieveItems/>}\n                    else\n                    { return <Redirect exact to=\"/\" ></Redirect>}\n\n\n                }}>\n                </Route>\n                <Route path =\"/:id/adminrequest\"\n                render={() => {\n                    if (Auth.token !== false && (Auth.UserRole === \"Admin\"))\n                    { return <ManagerAdminDetails/>}\n                    else\n                    { return <Redirect exact to=\"/\" ></Redirect>}\n\n\n                }}> \n\n                </Route>\n                \n                <Route path =\"/:id/directorrequest\"\n                render={() => {\n                    if (Auth.token !== false && (Auth.UserRole === \"Director\"))\n                    { return <DirectorDetails/>}\n                    else\n                    { return <Redirect exact to=\"/\" ></Redirect>}\n\n\n                }}> \n\n                </Route>\n                \n                <Route  path=\"/dashboard\" \n                render={() => {\n                    console.log('Auth Token ', Auth.token);\n                    console.log('Auth User Role ', Auth.userRole);\n                    if (Auth.token !== false && (Auth.UserRole === 'General' || Auth.UserRole === 'Head'))   \n                        { return <Dashboard /> }\n                    else    \n                    {\n                        console.log('here');\n                        return <Redirect exact to=\"/\" />\n                    }\n                       \n                       \n                }}>\n                </Route>\n                {/* <ProtectRoute path = '/dashboard' exact comp = {Dashboard} token = {Auth.token} /> */}\n\n                <Route  path=\"/hoddashboard\" \n                render={() => {\n                    if (Auth.token !== false && (Auth.UserRole === 'Head'))   \n                        { return <HODDashboard/> }\n                    else    \n                    {\n                        return <Redirect to=\"/\"/>\n                    }\n                       \n                       \n                }}>\n                </Route>\n                    \n                <Route  path=\"/logout\" \n                render={() => {\n                    if (Auth.token !== false )   \n                        { return <LogOut/> }\n                    else    \n                    {\n                        return <Redirect to=\"/\"/>\n                    }\n                       \n                       \n                }}>\n                </Route>\n                    \n                <Route  path=\"/purchase\" \n                render={() => {\n                    if (Auth.token !== false && (Auth.UserRole === 'Purchase'))   \n                        { return <PurchaseDashboard/> }\n                    else    \n                    {\n                        return <Redirect to=\"/\"/>\n                    }\n                       \n                       \n                }}>\n                </Route>    \n                \n                <Route  path=\"/managerdashboard\" \n                render={() => {\n                    if (Auth.token !== false && (Auth.UserRole === 'Admin' || Auth.UserRole === \"Accounts\" || Auth.UserRole === \"Director\"))   \n                        { return <MDashboard /> }\n                    else    \n                    {\n                        return <Redirect to=\"/\"/>\n                    }\n                       \n                       \n                }}>\n                </Route>  \n\n               <Route  path=\"/storedashboard\" \n               render={() => {\n                   if (Auth.token !== false && Auth.UserRole === 'Store')   \n                       { return <StoreDashboard /> }\n                   else    \n                   {\n                       return <Redirect to=\"/\"/>\n                   }\n                      \n                      \n               }}>\n                </Route>\n                <Route  path=\"/*\" \n               render={() => {\n                       return <Redirect to=\"/\"/>   \n                      \n               }}>\n    \n               </Route> \n            </Switch>\n         \n    )\n}\n\n// const ProtectRoute = ({token, comp: Component, ...rest})=>{\n//     // const Auth = React.useContext(AuthApi);\n    \n//     return (\n\n//         <Route \n//         {...rest}\n//         render={() =>{ \n//          if (token)\n//             {\n//                 console.log(\"Token is true\")\n//                 return <Component />\n//             }\n        \n//         else\n//             {\n//                 console.log(\"Token is not true\")\n//                 return (<Redirect to='/' exact/>)\n//             }    \n//         }\n    \n    \n//     }\n        \n//         />\n//     )\n// }\n\n\n// const ProtectLogin = ({token, components: Component, ...rest})=>{\n//     return (\n        \n//         <Route \n//         {...rest}\n//         render={() => token ? (\n//             <Redirect to='/dashboard'/>    \n//         ):\n//         (\n//             <Component />\n//         )\n    \n    \n//     }\n        \n//         />\n//     )\n// }\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}