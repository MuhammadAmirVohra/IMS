{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/amir/Desktop/New File/inventory_deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _regeneratorRuntime from\"/home/amir/Desktop/New File/inventory_deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/amir/Desktop/New File/inventory_deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/amir/Desktop/New File/inventory_deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject,_templateObject2,_templateObject3;import React,{useEffect,useState}from'react';import axios from'axios';import{Table,Button,Container,Modal,Form}from'react-bootstrap';import moment from'moment';import{API_URL}from'../../utils/constant';import styled from'styled-components';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var RequestTable=function RequestTable(){var arr=['Date Requested','Item Name','Quantity','Quotation'];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allrequest=_useState2[0],setrequests=_useState2[1];// const [open, setOpen] = useState(false);\nfunction fetch(){return _fetch.apply(this,arguments);}// var requests = []\nfunction _fetch(){_fetch=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"\".concat(API_URL,\"/get_purchase_request\"),{withCredentials:true}).then(function(res){console.log(res.data);setrequests(res.data);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _fetch.apply(this,arguments);}useEffect(function(){fetch();},[]);var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showModal=_useState4[0],setShow=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),file=_useState6[0],SetFile=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),Info=_useState8[0],SetInfo=_useState8[1];var SubmitFile=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var formData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();console.log('File ',file);// console.log(e.target.file)\n// console.log('document', document.getElementById('file').value())\nif(!file){_context.next=9;break;}formData=new FormData();formData.append('file',file);_context.next=7;return axios.post(\"\".concat(API_URL,\"/\").concat(Info,\"/upload\"),formData,{headers:{'Content-Type':'multipart/form-data'}}).then(function(res){if(res.data.code==200){window.flash('File Successfully Submitted');fetch();}else{window.flash('Failed To Submit The File','danger');}});case 7:_context.next=10;break;case 9:window.flash('Please select a file to add.','danger');case 10:case\"end\":return _context.stop();}}},_callee);}));return function SubmitFile(_x){return _ref.apply(this,arguments);};}();var onChangeHandlerFile=function onChangeHandlerFile(files){console.log(files);var _files$target$files=_slicedToArray(files.target.files,1),uploadedFile=_files$target$files[0];console.log(uploadedFile);SetFile(uploadedFile);};// const ModalContent = ()=>{\n//    function getBase64(e) {\n//         var file = e.target.files[0]\n//         let reader = new FileReader()\n//         reader.readAsDataURL(file)\n//         reader.onload = () => {\n//             console.log(reader.result)\n//             SetFile(reader.result)\n//         //   this.setState({\n//         //     imgUpload: reader.result\n//         //   })\n//         };\n//         reader.onerror = function (error) {\n//           console.log('Error: ', error);\n//         }\n//       }\n//     return(\n//         <Modal show = {showModal} onHide ={() => {setShow(false)}}>\n//             <Modal.Header closeButton>\n//                 <Modal.Title>\n//                     Details \n//                 </Modal.Title>\n//                 </Modal.Header>\n//                 <Form>    \n//                 <ModalBody>\n//                 <input\n//                 type = 'file'\n//                 id=\"file\"\n//                 name = \"file\"\n//                 value={FileInfo}\n//                 onChange={(e) => { e.preventDefault(); \n//                     SetFile(e.target.files[0])\n//                     // getBase64(e);\n//                 }}\n//                 />\n//                 </ModalBody>\n//             <Modal.Footer>\n//                 <Btn className = \"btn-success\" type = \"submit\">Submit</Btn>\n//             </Modal.Footer>\n//             </Form>\n//         </Modal>\n//     );\n// }\nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(TableStyle,{responsive:\"sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),arr.map(function(_,index){return/*#__PURE__*/_jsx(\"th\",{children:_},index);})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:allrequest.map(function(request,index){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:moment(request.Added).format('Do MMMM YYYY')}),/*#__PURE__*/_jsx(\"td\",{children:request.Item}),/*#__PURE__*/_jsx(\"td\",{children:request.Quantity}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(Form,{onSubmit:SubmitFile,children:[/*#__PURE__*/_jsx(Form.File,{name:\"file\",onChange:onChangeHandlerFile}),/*#__PURE__*/_jsx(Btn,{type:\"submit\",className:\"mt-2 btn btn-md\",onClick:function onClick(){SetInfo(request._id);},children:\"Submit\"})]})})]},index)});})})]})})});};export default RequestTable;var TableStyle=styled(Table)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n\\nth {background: #1F386B;color : white;}\\ntr{\\n    cursor:pointer;\\n    &:hover{\\n        background: lightgray;\\n    }\\n}\\n\"])));var Btn=styled(Button)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    background :#EFBB20;\\n    border: none; \\n    &:hover{\\n    background: #0e8ccc;\\n}\"])));var ModalBody=styled(Modal.Body)(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n\\nli{\\n    padding:5px;\\n}\\n\\n\"])));","map":{"version":3,"sources":["/home/amir/Desktop/New File/inventory_deploy/client/src/components/purchaseRequest/Purchase_request_table.js"],"names":["React","useEffect","useState","axios","Table","Button","Container","Modal","Form","moment","API_URL","styled","RequestTable","arr","allrequest","setrequests","fetch","get","withCredentials","then","res","console","log","data","showModal","setShow","file","SetFile","Info","SetInfo","SubmitFile","e","preventDefault","formData","FormData","append","post","headers","code","window","flash","onChangeHandlerFile","files","target","uploadedFile","map","_","index","request","Added","format","Item","Quantity","_id","TableStyle","Btn","ModalBody","Body"],"mappings":"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","sourcesContent":["import React , { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport {Table,Button,Container, Modal, Form} from 'react-bootstrap';\nimport moment from 'moment';\nimport { API_URL } from '../../utils/constant';\n\nimport styled from 'styled-components';\n\nconst RequestTable = () => {\n    const arr = ['Date Requested','Item Name','Quantity','Quotation']\n    const [allrequest, setrequests] = useState([])\n    // const [open, setOpen] = useState(false);\n    async function fetch(){\n        await axios.get(`${API_URL}/get_purchase_request`, {\n             withCredentials: true\n         }).then((res)=>{\n             console.log(res.data);\n             \n             setrequests(res.data);\n             \n         })\n     } \n    // var requests = []\n    useEffect( () =>{\n       \n        \n    fetch()\n    },[])\n    \n    const [showModal, setShow] = useState(false)\n    const [file, SetFile] = useState(null)\n    const [Info, SetInfo] = useState(\"\")\n\n    \n    const SubmitFile = async (e)=>{\n            \n        e.preventDefault();            \n\n        console.log('File ' , file)\n        // console.log(e.target.file)\n\n\n        // console.log('document', document.getElementById('file').value())\n        \n        if (file) {\n            const formData = new FormData();\n            formData.append('file', file);\n            await axios.post(`${API_URL}/${Info}/upload`, formData, {\n              headers: {\n                'Content-Type': 'multipart/form-data'\n              }\n            }).then((res)=>{\n                if(res.data.code == 200)\n                {\n                    window.flash('File Successfully Submitted')\n                    fetch();\n                }\n                else\n                {\n                    window.flash('Failed To Submit The File', 'danger')\n                }\n            });\n          } else {\n            window.flash('Please select a file to add.', 'danger');\n          }\n        \n        \n        \n        \n        \n    \n    }\n\n    const onChangeHandlerFile=(files)=>{\n        console.log(files)\n        const [uploadedFile] = files.target.files;\n        console.log(uploadedFile)\n        SetFile(uploadedFile)\n\n    }\n   \n\n   \n    // const ModalContent = ()=>{\n       \n    //    function getBase64(e) {\n    //         var file = e.target.files[0]\n    //         let reader = new FileReader()\n    //         reader.readAsDataURL(file)\n    //         reader.onload = () => {\n    //             console.log(reader.result)\n    //             SetFile(reader.result)\n    //         //   this.setState({\n    //         //     imgUpload: reader.result\n    //         //   })\n    //         };\n    //         reader.onerror = function (error) {\n    //           console.log('Error: ', error);\n    //         }\n    //       }\n        \n\n    //     return(\n    //         <Modal show = {showModal} onHide ={() => {setShow(false)}}>\n    //             <Modal.Header closeButton>\n    //                 <Modal.Title>\n    //                     Details \n    //                 </Modal.Title>\n    //                 </Modal.Header>\n    //                 <Form>    \n\n    //                 <ModalBody>\n                        \n    //                 <input\n    //                 type = 'file'\n    //                 id=\"file\"\n    //                 name = \"file\"\n    //                 value={FileInfo}\n    //                 onChange={(e) => { e.preventDefault(); \n    //                     SetFile(e.target.files[0])\n    //                     // getBase64(e);\n    //                 }}\n    //                 />\n    //                 </ModalBody>\n\n                \n    //             <Modal.Footer>\n    //                 <Btn className = \"btn-success\" type = \"submit\">Submit</Btn>\n    //             </Modal.Footer>\n    //             </Form>\n\n    //         </Modal>\n    //     );\n        \n    \n    // }\n    \n\n\n    return(\n        <>\n         {/* {showModal?\n            <div>\n                <ModalContent/>\n            </div>\n        :null    */}\n        \n\n\n\n     <Container>\n        <TableStyle responsive=\"sm\">\n        <thead>\n            <tr>\n             <th>#</th>\n            {arr.map((_, index) => (\n              <th key={index}>{_}</th>\n            ))}\n            \n          </tr>\n        </thead>\n        <tbody>\n          {allrequest.map((request, index) =>{\n            return(\n            <>\n             <tr key= {index}>\n                <td>{index+1}</td>\n                {/* <td>{request.R_Emp_Name}<br/></td> */}\n                {/* <td>{request.R_Emp_Email}</td> */}\n                <td>{moment(request.Added).format('Do MMMM YYYY')}</td>\n                <td>{request.Item}</td>\n                <td>{request.Quantity}</td>\n                {/* <td>{request.Duration}</td> */}\n                <td>\n\n\n                {/* <a href = \"http://localhost:5000/upload\"><Btn>Upload</Btn></a> */}\n\n                    <Form onSubmit = {SubmitFile}>\n                        <Form.File name = \"file\" onChange = {  onChangeHandlerFile } />\n                        <Btn type=\"submit\" className =\"mt-2 btn btn-md\" onClick= {() => {SetInfo(request._id)}}>Submit</Btn>\n                    </Form>\n                </td>\n            </tr>\n            \n            </>\n            )\n          })}\n        </tbody>\n      </TableStyle>\n      </Container>\n      </>\n    )\n\n\n}\n\n\nexport default RequestTable\n\nconst TableStyle = styled(Table)`\n\nth {background: #1F386B;color : white;}\ntr{\n    cursor:pointer;\n    &:hover{\n        background: lightgray;\n    }\n}\n`;\n\n\nconst Btn = styled(Button)`\n    background :#EFBB20;\n    border: none; \n    &:hover{\n    background: #0e8ccc;\n}`;\n\nconst ModalBody = styled(Modal.Body)`\n\nli{\n    padding:5px;\n}\n\n`;"]},"metadata":{},"sourceType":"module"}