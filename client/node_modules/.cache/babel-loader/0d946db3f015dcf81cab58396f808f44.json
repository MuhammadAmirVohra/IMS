{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/amir/Desktop/New File/IMS/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _regeneratorRuntime from\"/home/amir/Desktop/New File/IMS/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/amir/Desktop/New File/IMS/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/amir/Desktop/New File/IMS/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject,_templateObject2;import HeaderPages from'../header/Header_pages';import{Card,Container,Button}from'react-bootstrap';import axios from'axios';import{useEffect,useState}from'react';import{useParams}from'react-router-dom';import moment from'moment';import styled from'styled-components';// import Pdf from \"react-to-pdf\";\nimport{useHistory}from'react-router';// import ReactDOM from \"react-dom\";\nimport React from\"react\";import{API_URL}from'../../utils/constant';import download from'downloadjs';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Director=function Director(){var history=useHistory();var _useParams=useParams(),id=_useParams.id;var _useState=useState({request:{},comment:[]}),_useState2=_slicedToArray(_useState,2),details=_useState2[0],setDetails=_useState2[1];// const [Hide, setHide] = useState(false);\nconsole.log(\"Params \",id);var ref=/*#__PURE__*/React.createRef();// const PDF =()=>{\n//     axios.get(`${API_URL}/pdf`).then((res)=>{\n//         console.log(res.data)\n//     }) \n// }\n// const [req_id, set_req_id] = useState(\"\")\nuseEffect(function(){axios.get(\"\".concat(API_URL,\"/\")+id+'/directorrequest').then(function(res){setDetails(res.data);// set_req_id(id);\nconsole.log(id);// console.log(details.request._id) \n});},[id]);var Accept=function Accept(){axios.post(\"\".concat(API_URL,\"/\")+id+'/acceptdirector').then(function(res){if(res.status===200){console.log('Requested Accepted');window.flash('Requested Accepted');history.push('/managerdashboard');}else{console.log('Requested Failed to Accept');window.flash('Requested Failed to Accept','danger');}});};var Reject=function Reject(){axios.post(\"\".concat(API_URL,\"/\")+id+'/rejectdirector',{name:details.request.R_Emp_Name,email:details.request.R_Emp_Email,item:details.request.Item}).then(function(res){if(res.status===200){console.log('Requested Rejected');window.flash('Requested Rejected');history.push('/managerdashboard');}else{console.log('Requested Failed to Reject');window.flash('Requested Failed to Reject','danger');}});};var Download=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"\".concat(API_URL,\"/\").concat(id,\"/download\"),{responseType:'blob'}).then(function(res){download(res.data,details.request.Item+'_quotation','pdf');});case 2:case\"end\":return _context.stop();}}},_callee);}));return function Download(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(HeaderPages,{}),/*#__PURE__*/_jsx(MainContainer,{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:\"Request Details\"}),/*#__PURE__*/_jsxs(Card.Body,{ref:ref,children:[/*#__PURE__*/_jsxs(Card.Title,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"ID: \"}),id]}),/*#__PURE__*/_jsxs(Card.Title,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name: \"}),details.request.R_Emp_Name]}),/*#__PURE__*/_jsxs(Card.Title,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email: \"}),details.request.R_Emp_Email]}),/*#__PURE__*/_jsxs(Card.Title,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Item: \"}),details.request.Item]}),/*#__PURE__*/_jsxs(Card.Title,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Duration: \"}),details.request.Duration]}),/*#__PURE__*/_jsxs(Card.Title,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Quantity: \"}),details.request.Quantity]}),/*#__PURE__*/_jsxs(Card.Title,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Reason : \"}),details.request.Reason]}),/*#__PURE__*/_jsxs(Card.Title,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date Requested \"}),moment(details.request.Added).format('Do MMMM YYYY')]}),/*#__PURE__*/_jsxs(Card.Title,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Accounts Manager Comments : \"}),details.comment.Comment_Accounts]}),/*#__PURE__*/_jsxs(Card.Title,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Admin Manager Comments : \"}),details.comment.Comment_Admin]}),/*#__PURE__*/_jsx(Btn,{onClick:Download,children:\"Download Quotation\"})]}),/*#__PURE__*/_jsxs(Card.Footer,{children:[/*#__PURE__*/_jsx(Btn,{children:/*#__PURE__*/_jsx(\"a\",{href:\"\".concat(API_URL,\"/\")+id+'/pdf',children:\"Generate Pdf\"})}),/*#__PURE__*/_jsx(Btn,{onClick:Accept,children:\"Accept\"}),/*#__PURE__*/_jsx(Btn,{onClick:Reject,children:\"Reject\"})]})]})})]});};export default Director;var MainContainer=styled(Container)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    width: 100%;\\n    height: auto;\\n    min-height: 100%;\\n    min-height: 100vh;\\n    margin-top:100px;\\n\"])));var Btn=styled(Button)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    background :#EFBB20;\\n    border: none; \\n    &:hover{\\n    background: #0e8ccc;\\n    a{\\n        color: white;\\n        text-decoration : none;\\n    }\\n}\"])));","map":{"version":3,"sources":["/home/amir/Desktop/New File/IMS/client/src/components/RequestDetails/Director.js"],"names":["HeaderPages","Card","Container","Button","axios","useEffect","useState","useParams","moment","styled","useHistory","React","API_URL","download","Director","history","id","request","comment","details","setDetails","console","log","ref","createRef","get","then","res","data","Accept","post","status","window","flash","push","Reject","name","R_Emp_Name","email","R_Emp_Email","item","Item","Download","responseType","Duration","Quantity","Reason","Added","format","Comment_Accounts","Comment_Admin","MainContainer","Btn"],"mappings":"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","sourcesContent":["import HeaderPages from '../header/Header_pages';\nimport {Card,Container, Button} from 'react-bootstrap';\nimport axios from 'axios';\nimport {useEffect, useState} from 'react';\nimport {useParams} from 'react-router-dom';\nimport moment from 'moment';\nimport styled from 'styled-components';\n// import Pdf from \"react-to-pdf\";\nimport {useHistory} from 'react-router';\n// import ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport { API_URL } from '../../utils/constant';\nimport download from 'downloadjs';\n\n\nconst Director = () =>{ \n        \n    const history = useHistory();\n    const { id } = useParams();\n    const [details, setDetails] = useState({request : {}, comment : []});\n    // const [Hide, setHide] = useState(false);\n\n    console.log(\"Params \" , id);\n    const ref = React.createRef();\n\n    // const PDF =()=>{\n    //     axios.get(`${API_URL}/pdf`).then((res)=>{\n    //         console.log(res.data)\n    //     }) \n    // }\n    // const [req_id, set_req_id] = useState(\"\")\n    useEffect (() =>{\n        axios.get(`${API_URL}/` + id + '/directorrequest')\n        .then(\n            (res) => {\n                setDetails(res.data)\n                // set_req_id(id);\n                console.log(id)\n                // console.log(details.request._id) \n        \n            } \n        )\n    },[id])\n    \n    const Accept = ()=>{\n        axios.post(`${API_URL}/`+id+'/acceptdirector').then((res)=>{\n                if(res.status === 200)\n                { \n                    console.log('Requested Accepted');\n                    window.flash('Requested Accepted');\n                    history.push('/managerdashboard');\n\n                }\n                else\n                {\n                    console.log('Requested Failed to Accept');\n                    window.flash('Requested Failed to Accept', 'danger');\n                }\n        })\n    }\n    \n\n    const Reject = ()=>{\n        axios.post(`${API_URL}/`+id+'/rejectdirector', {\n            name : details.request.R_Emp_Name,\n            email : details.request.R_Emp_Email,\n            item : details.request.Item\n        }).then((res)=>{\n            if(res.status === 200)\n            { \n                console.log('Requested Rejected');\n                window.flash('Requested Rejected');\n                history.push('/managerdashboard');\n\n            }\n            else\n            {\n                console.log('Requested Failed to Reject');\n                window.flash('Requested Failed to Reject', 'danger');\n            }\n        })\n    }\n\n\n\n    const Download = async ()=>{\n        await axios.get(`${API_URL}/${id}/download`, {\n            responseType: 'blob'\n          }).then((res)=>{\n            download(res.data, details.request.Item + '_quotation', 'pdf');\n          })\n    }\n\n\n    return(\n        \n        <>\n        <HeaderPages/>\n        <MainContainer>\n\n        <Card>\n            <Card.Header>\n                Request Details\n            </Card.Header>\n            <Card.Body ref = {ref}>\n                <Card.Title><strong>ID: </strong>{id}</Card.Title>\n                <Card.Title><strong>Name: </strong>{details.request.R_Emp_Name}</Card.Title>\n                <Card.Title><strong>Email: </strong>{details.request.R_Emp_Email}</Card.Title>\n                <Card.Title><strong>Item: </strong>{details.request.Item}</Card.Title>\n                <Card.Title><strong>Duration: </strong>{details.request.Duration}</Card.Title>\n                <Card.Title><strong>Quantity: </strong>{details.request.Quantity}</Card.Title>\n                <Card.Title><strong>Reason : </strong>{details.request.Reason}</Card.Title>\n                <Card.Title><strong>Date Requested </strong>{moment(details.request.Added).format('Do MMMM YYYY')}</Card.Title>\n                <Card.Title><strong>Accounts Manager Comments : </strong>{details.comment.Comment_Accounts}</Card.Title>\n                <Card.Title><strong>Admin Manager Comments : </strong>{details.comment.Comment_Admin}</Card.Title>\n                <Btn onClick={Download}>Download Quotation</Btn>\n              \n            </Card.Body>\n            <Card.Footer>\n            {/* <Pdf targetRef={ref} filename=\"code-example.pdf\">\n                 {({ toPdf }) => <Btn onClick={ () => { toPdf()}}>Generate Pdf</Btn>}\n            </Pdf> */}\n            <Btn><a href = {`${API_URL}/` + id + '/pdf'}>Generate Pdf</a></Btn>\n            <Btn onClick={Accept}>Accept</Btn>\n            <Btn onClick={Reject}>Reject</Btn>\n            </Card.Footer>\n        </Card>\n        </MainContainer>\n        \n       </>\n        \n    );\n\n}\n\nexport default Director;\nconst MainContainer = styled(Container)`\n    width: 100%;\n    height: auto;\n    min-height: 100%;\n    min-height: 100vh;\n    margin-top:100px;\n`;\n\n\nconst Btn = styled(Button)`\n    background :#EFBB20;\n    border: none; \n    &:hover{\n    background: #0e8ccc;\n    a{\n        color: white;\n        text-decoration : none;\n    }\n}`;\n"]},"metadata":{},"sourceType":"module"}