{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/amir/Desktop/New File/IMS/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _defineProperty from\"/home/amir/Desktop/New File/IMS/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/amir/Desktop/New File/IMS/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/amir/Desktop/New File/IMS/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject,_templateObject2,_templateObject3,_templateObject4;import React,{useEffect,useState}from'react';import'react-bootstrap';import{Form,Button,Container,Row,Col,Card}from'react-bootstrap';import styled from'styled-components';import axios from'axios';import Header from'../header/Header';import{API_URL}from'../../utils/constant';import{useHistory}from'react-router';// import PropTypes from 'prop-types';\nimport AuthApi from'../Authapi';// import Cookies from 'js-cookie'\n// import {ReactPDF} from '@react-pdf/renderer';\n// import PdfGenerator from '../PDF/PdfGenerator'\nimport Cookies from'universal-cookie';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var LoginForm=function LoginForm(){var cookie=new Cookies();var Auth=React.useContext(AuthApi);var history=useHistory();var _useState=useState({username:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),Credentials=_useState2[0],SetCredentials=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),login=_useState4[0],setlogin=_useState4[1];// Functions\nvar onChangeHandle=function onChangeHandle(e){var value=e.target.value;// console.log(value);\nSetCredentials(_objectSpread(_objectSpread({},Credentials),{},_defineProperty({},e.target.name,value)));};function simulateNetworkRequest(){return new Promise(function(resolve){return setTimeout(resolve,2000);});}function LoadingButton(){var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setLoading=_useState6[1];useEffect(function(){if(isLoading){simulateNetworkRequest().then(function(){setLoading(false);});}},[isLoading]);var handleClick=function handleClick(){setLoading(true);onSubmit();};return/*#__PURE__*/_jsx(SigninButton,{disabled:isLoading,onClick:!isLoading?handleClick:null,children:isLoading?'Signing in..':'Sign In'});}var onSubmit=function onSubmit(){// event.preventDefault()\naxios({method:\"POST\",data:{username:Credentials.username,password:Credentials.password},withCredentials:true,url:\"\".concat(API_URL,\"/login\")}).then(function(res){console.log(res.data);if(res.data){console.log(res.data);// settoken(res.data._id)\nif(res.data.code===404){Auth.settoken(false);// localStorage.setItem('token', false);\ncookie.remove('token');cookie.remove('user');setlogin(false);window.flash('Login Failed','danger');}else{Auth.settoken(true);// Cookies.set('user', 'loginTrue')\n// Auth.setRole(res.data.user.Designation);\n// localStorage.setItem('token', true);\n// localStorage.setItem('user', res.data.user.Designation);\ncookie.set(\"token\",true,{path:\"/\"});cookie.set(\"user\",res.data.user.Designation,{path:\"/\"});Auth.setRole(res.data.user.Designation);if(res.data.user.Designation==='Head')history.push('/hoddashboard');else if(res.data.user.Designation==='Purchase')history.push('/purchase');else if(res.data.user.Designation==='Admin'||res.data.user.Designation==='Accounts'||res.data.user.Designation==='Director')history.push('/managerdashboard');else if(res.data.user.Designation===\"Store\")history.push('/storedashboard');else history.push('/dashboard');}}else{console.log('No user found');}});};var onKeyhandle=function onKeyhandle(e){if(e.keyCode===13){console.log(\"heree\");onSubmit();}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(MainContainer,{className:\"d-flex justify-content-center align-items-center\",children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{className:\"text-center\",children:/*#__PURE__*/_jsx(CardStyle,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(Card.Header,{className:\"text-left\",children:\"LOGIN\"}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"text-left\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Username : \"}),/*#__PURE__*/_jsx(Form.Control,{placeholder:\"Enter Username\",onChange:onChangeHandle,type:\"text\",name:\"username\",value:Credentials.username})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"text-left\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password : \"}),/*#__PURE__*/_jsx(Form.Control,{onKeyUp:onKeyhandle,placeholder:\"Enter Password\",onChange:onChangeHandle,type:\"password\",name:\"password\",value:Credentials.password})]}),login===false&&/*#__PURE__*/_jsx(CardText,{className:\"text-left\",children:\"*username or password incorrect\"}),/*#__PURE__*/_jsx(Form.Group,{className:\"text-right\",children:/*#__PURE__*/_jsx(LoadingButton,{})})]})]})})})})})]});};export default LoginForm;var CardText=styled(Card.Text)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\ncolor:red;\\nmargin-top: -13px;\\nfont-size: 12px;\\n\"])));var CardStyle=styled(Card)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\nbackground: white;\\nbox-shadow: 6px 5px 5px rgb(0 0 0 );\\n    width: 500px;\\n    height: 350px;\\n   \\n\"])));var SigninButton=styled(Button)(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n    background :#EFBB20;\\n    border: none; \\n    &:hover{\\n    background: #0e8ccc;\\n}\\n\"])));var MainContainer=styled(Container)(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n    width: 100%;\\n  height: 100vh;\\n  min-height: 100%;\\n  min-height: 100vh;\\n\"])));","map":{"version":3,"sources":["/home/amir/Desktop/New File/IMS/client/src/components/login/Login_Form.js"],"names":["React","useEffect","useState","Form","Button","Container","Row","Col","Card","styled","axios","Header","API_URL","useHistory","AuthApi","Cookies","LoginForm","cookie","Auth","useContext","history","username","password","Credentials","SetCredentials","login","setlogin","onChangeHandle","e","value","target","name","simulateNetworkRequest","Promise","resolve","setTimeout","LoadingButton","isLoading","setLoading","then","handleClick","onSubmit","method","data","withCredentials","url","res","console","log","code","settoken","remove","window","flash","set","path","user","Designation","setRole","push","onKeyhandle","keyCode","CardText","Text","CardStyle","SigninButton","MainContainer"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport 'react-bootstrap'\nimport { Form, Button, Container, Row, Col, Card} from 'react-bootstrap';\nimport styled  from 'styled-components';\nimport axios from 'axios';\nimport Header from '../header/Header'\nimport { API_URL } from '../../utils/constant';\nimport { useHistory } from 'react-router';\n// import PropTypes from 'prop-types';\nimport AuthApi from '../Authapi'\n// import Cookies from 'js-cookie'\n// import {ReactPDF} from '@react-pdf/renderer';\n// import PdfGenerator from '../PDF/PdfGenerator'\nimport Cookies from 'universal-cookie';\n\nconst LoginForm = () => {\n    const cookie = new Cookies();\n    \n    const Auth = React.useContext(AuthApi);\n    const history = useHistory();\n    \n\n    const [Credentials, SetCredentials] = useState({\n        username : \"\",\n        password : \"\"\n    });\n   const [login,setlogin] = useState(true);\n    // Functions\n\n    const onChangeHandle = (e) => {\n        const value = e.target.value;\n        // console.log(value);\n        SetCredentials({\n            ...Credentials,\n            [e.target.name] : value\n       });\n    }\n\n\n    function simulateNetworkRequest() {\n        return new Promise((resolve) => setTimeout(resolve, 2000));\n      }\n      \n      function LoadingButton() {\n            const [isLoading, setLoading] = useState(false);\n          \n            useEffect(() => {\n              if (isLoading) {\n                simulateNetworkRequest().then(() => {\n                  setLoading(false);\n                });\n              }\n            \n            \n        \n          \n            }, [isLoading]);\n\n\n            \n\n            const handleClick = () =>{ \n                setLoading(true);\n                onSubmit();\n            };\n          \n            return (\n              <SigninButton \n              \n                disabled={isLoading}\n                onClick={!isLoading ? handleClick : null}\n                \n              >\n                {isLoading ? 'Signing in..' : 'Sign In'}\n              </SigninButton>\n            );\n      }\n\n\n\n\n    const onSubmit = () => {   \n        \n        // event.preventDefault()\n       \n        axios({\n            method: \"POST\",\n            data: {\n                username: Credentials.username,\n                password: Credentials.password\n            },\n            withCredentials: true,\n            url: `${API_URL}/login`,\n          }).then((res)=>{\n            console.log(res.data);      \n            if(res.data) \n            {\n                console.log(res.data)\n                // settoken(res.data._id)\n               if (res.data.code === 404)\n               {\n                    Auth.settoken(false);\n                    // localStorage.setItem('token', false);\n                    cookie.remove('token');\n                    cookie.remove('user');\n                    setlogin(false)\n                    window.flash('Login Failed', 'danger');\n\n               }\n               else\n               {\n                    Auth.settoken(true);\n                    // Cookies.set('user', 'loginTrue')\n                    // Auth.setRole(res.data.user.Designation);\n                    // localStorage.setItem('token', true);\n                    // localStorage.setItem('user', res.data.user.Designation);\n                    cookie.set(\"token\", true, {path: \"/\"});\n                    cookie.set(\"user\", res.data.user.Designation, {path: \"/\"});\n\n                    Auth.setRole(res.data.user.Designation);\n\n                    if(res.data.user.Designation === 'Head')\n                    history.push('/hoddashboard'); \n                    else if(res.data.user.Designation === 'Purchase')\n                    history.push('/purchase');\n                    else if(res.data.user.Designation === 'Admin' || res.data.user.Designation === 'Accounts' || res.data.user.Designation === 'Director')\n                    history.push('/managerdashboard'); \n                    else if(res.data.user.Designation === \"Store\")\n                    history.push('/storedashboard')\n                    else        \n                    history.push('/dashboard');\n               }\n                 \n            }\n            else\n            {\n                console.log('No user found')\n            }\n        })\n        };\n        \n        const onKeyhandle = (e) => {\n          if(e.keyCode  === 13)\n          {\n            console.log(\"heree\")\n              onSubmit()\n          }\n        }\n\n    return (\n        <>\n        <Header/>\n        <MainContainer className=\"d-flex justify-content-center align-items-center\">\n            <Row>\n                <Col className=\"text-center\">\n                    <CardStyle>\n                    <Form  onSubmit={onSubmit} >\n                        <Card.Header className = \"text-left\" >LOGIN</Card.Header>\n                        <Card.Body >\n                        <Form.Group className=\"text-left\">\n                        <Form.Label>Username : </Form.Label>\n                        <Form.Control placeholder=\"Enter Username\" onChange={onChangeHandle} type=\"text\" name=\"username\" value={Credentials.username}/>                \n                           \n                        </Form.Group>\n                        <Form.Group className=\"text-left\">\n                            <Form.Label>Password : </Form.Label>\n                            <Form.Control onKeyUp={onKeyhandle} placeholder=\"Enter Password\" onChange={onChangeHandle} type=\"password\" name=\"password\" value={Credentials.password} />\n                        </Form.Group>\n\n                    {login===false &&\n                    \n                    <CardText className=\"text-left\">*username or password incorrect</CardText>\n                    \n                    }\n\n                        <Form.Group className=\"text-right\">\n                            {/* <a href=\"#\"> Forgot Password ? </a> */}\n                            <LoadingButton />\n                        </Form.Group>\n                        \n                        {/* <Button onClick = {() => { ReactPDF.renderToStream(<PdfGenerator/>); }}> PDF </Button> */}\n\n                        \n                        {/* <PDF /> */}\n                        </Card.Body>\n                    </Form>   \n                    </CardStyle>\n                </Col> \n            </Row>\n\n\n            \n        </MainContainer>  \n        </> \n    )\n    \n};\n\nexport default LoginForm;\n\nconst CardText = styled(Card.Text)`\ncolor:red;\nmargin-top: -13px;\nfont-size: 12px;\n`;\nconst CardStyle = styled(Card)`\nbackground: white;\nbox-shadow: 6px 5px 5px rgb(0 0 0 );\n    width: 500px;\n    height: 350px;\n   \n`;\nconst SigninButton = styled(Button)`\n    background :#EFBB20;\n    border: none; \n    &:hover{\n    background: #0e8ccc;\n}\n`;\n\nconst MainContainer = styled(Container)`\n    width: 100%;\n  height: 100vh;\n  min-height: 100%;\n  min-height: 100vh;\n`;"]},"metadata":{},"sourceType":"module"}