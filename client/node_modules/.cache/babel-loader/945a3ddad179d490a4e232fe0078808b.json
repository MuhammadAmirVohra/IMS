{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/amir/Desktop/New File/inventory_deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _regeneratorRuntime from\"/home/amir/Desktop/New File/inventory_deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/amir/Desktop/New File/inventory_deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/amir/Desktop/New File/inventory_deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject;import React,{useEffect,useState}from'react';import axios from'axios';import{Table,Container,OverlayTrigger,Tooltip}from'react-bootstrap';import moment from'moment';import styled from'styled-components';import{useHistory}from'react-router';import{API_URL}from'../../utils/constant';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AdminRequestTable=function AdminRequestTable(){var arr=['Requested By','Email','Date Requested','Item Name','Quantity','Duration'];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allrequest=_useState2[0],setrequests=_useState2[1];function fetch(){return _fetch.apply(this,arguments);}function _fetch(){_fetch=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"\".concat(API_URL,\"/get_accounts_requests\"),{withCredentials:true}).then(function(res){console.log(res.data);setrequests(res.data);});case 2:case\"end\":return _context.stop();}}},_callee);}));return _fetch.apply(this,arguments);}useEffect(function(){fetch();},[]);var history=useHistory();var OpenNewPage=function OpenNewPage(id){var Role=localStorage.getItem('user');if(Role==='Admin')history.push('/'+id+'/adminrequest');else if(Role==='Director')history.push('/'+id+'/directorrequest');else history.push('/'+id+'/accountsrequest');};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Container,{children:[allrequest.length>0&&/*#__PURE__*/_jsxs(TableStyle,{responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),arr.map(function(_,index){return/*#__PURE__*/_jsx(\"th\",{children:_},index);})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:allrequest.map(function(request,index){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(OverlayTrigger,{placement:\"bottom\",overlay:/*#__PURE__*/_jsx(Tooltip,{id:\"button-tooltip-2\",children:\"Click to see Details\"}),children:/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){OpenNewPage(request._id);},children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsxs(\"td\",{children:[request.R_Emp_Name,/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"td\",{children:request.R_Emp_Email}),/*#__PURE__*/_jsx(\"td\",{children:moment(request.Added).format('Do MMMM YYYY')}),/*#__PURE__*/_jsx(\"td\",{children:request.Item}),/*#__PURE__*/_jsx(\"td\",{children:request.Quantity}),/*#__PURE__*/_jsx(\"td\",{children:request.Duration})]})})});})})]}),allrequest.length===0&&/*#__PURE__*/_jsx(\"h2\",{children:\"No Requests.\"})]})});};export default AdminRequestTable;var TableStyle=styled(Table)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\nth {background: #1F386B; color:white;}\\ntr{\\n    cursor:pointer;\\n    &:hover{\\n        background: lightgray;\\n    }\\n}\\n\"])));// const Btn = styled(Button)`\n// &:hover{\n//     background: #0e8ccc;\n// }\n// `;\n// const ModalBody = styled(Modal.Body)`\n// li{\n//     padding:5px;\n// }\n// `;","map":{"version":3,"sources":["/home/amir/Desktop/New File/inventory_deploy/client/src/components/ManagerRequestTable/ManagerRequestTable.js"],"names":["React","useEffect","useState","axios","Table","Container","OverlayTrigger","Tooltip","moment","styled","useHistory","API_URL","AdminRequestTable","arr","allrequest","setrequests","fetch","get","withCredentials","then","res","console","log","data","history","OpenNewPage","id","Role","localStorage","getItem","push","length","map","_","index","request","_id","R_Emp_Name","R_Emp_Email","Added","format","Item","Quantity","Duration","TableStyle"],"mappings":"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","sourcesContent":["import React , { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport {Table,Container,OverlayTrigger,Tooltip} from 'react-bootstrap';\nimport moment from 'moment';\nimport styled from 'styled-components';\nimport {useHistory} from 'react-router';\nimport { API_URL } from '../../utils/constant';\n\nconst AdminRequestTable = () => {\n    const arr = ['Requested By','Email','Date Requested','Item Name','Quantity','Duration']\n    const [allrequest, setrequests] = useState([])\n    \n\n\n    async function fetch(){\n        await axios.get(`${API_URL}/get_accounts_requests`, {\n             withCredentials: true\n         }).then((res)=>{\n             console.log(res.data);\n             \n             setrequests(res.data);\n             \n         })\n    }\n    useEffect( () =>{\n    fetch()\n        \n    \n     \n    },[])\n \n    const history = useHistory() \n    const OpenNewPage = (id) => {\n        \n        var Role = localStorage.getItem('user');\n        if (Role === 'Admin')\n        history.push('/' + id + '/adminrequest')\n        else if (Role === 'Director')\n        history.push('/' + id + '/directorrequest')\n        else\n        history.push('/' + id + '/accountsrequest')\n      \n    }\n\n\n    return(\n        <>\n     \n\n     <Container>\n         { allrequest.length > 0 &&\n        <TableStyle responsive>\n        <thead>\n            <tr>\n             <th>#</th>\n            {arr.map((_, index) => (\n              <th key={index}>{_}</th>\n            ))}\n            \n          </tr>\n        </thead>\n        <tbody>\n          {allrequest.map((request, index) =>{\n            return(\n            <>\n            <OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"button-tooltip-2\">Click to see Details</Tooltip>} >\n            \n            <tr onClick =  {()=>{ \n                OpenNewPage(request._id)\n\n            }}>\n                <td>{index+1}</td>\n                <td>{request.R_Emp_Name}<br/></td>\n                <td>{request.R_Emp_Email}</td>\n                <td>{moment(request.Added).format('Do MMMM YYYY')}</td>\n                <td>{request.Item}</td>\n                <td>{request.Quantity}</td>\n                <td>{request.Duration}</td>\n                \n            </tr>\n            </OverlayTrigger>\n           \n            </>\n            )\n          })}\n        </tbody>\n      </TableStyle>\n      \n      }\n      {\n          allrequest.length === 0 && <h2>No Requests.</h2>\n      }\n        \n      </Container>\n      </>\n    )\n\n\n}\n\n\nexport default AdminRequestTable\n\nconst TableStyle = styled(Table)`\nth {background: #1F386B; color:white;}\ntr{\n    cursor:pointer;\n    &:hover{\n        background: lightgray;\n    }\n}\n`;\n\n// const Btn = styled(Button)`\n// &:hover{\n//     background: #0e8ccc;\n// }\n\n// `;\n\n// const ModalBody = styled(Modal.Body)`\n\n// li{\n//     padding:5px;\n// }\n\n// `;"]},"metadata":{},"sourceType":"module"}