{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/amir/Desktop/New File/IMS/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _regeneratorRuntime from\"/home/amir/Desktop/New File/IMS/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/amir/Desktop/New File/IMS/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/amir/Desktop/New File/IMS/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject,_templateObject2,_templateObject3;import React,{useEffect,useState}from'react';import axios from'axios';import{Table,Button,Container,Modal,Form}from'react-bootstrap';import moment from'moment';import styled from'styled-components';import{API_URL}from'../../utils/constant';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var RequestTable=function RequestTable(){var arr=['Requested By','Email','Date Requested','Item Name','Quantity','Duration'];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allrequest=_useState2[0],setrequests=_useState2[1];// const [open, setOpen] = useState(false);\nfunction fetch(){return _fetch.apply(this,arguments);}// var requests = []\nfunction _fetch(){_fetch=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"\".concat(API_URL,\"/get_all_request\"),{withCredentials:true}).then(function(res){console.log(res.data);setrequests(res.data);});case 2:case\"end\":return _context.stop();}}},_callee);}));return _fetch.apply(this,arguments);}useEffect(function(){fetch();},[]);var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showModal=_useState4[0],setShow=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),ModalInfo=_useState6[0],SetInfo=_useState6[1];var ModalContent=function ModalContent(){var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),comment=_useState8[0],setcomment=_useState8[1];var Approve=function Approve(){console.log('Approve Request');axios.post(\"\".concat(API_URL,\"/request_approve\"),{id:ModalInfo._id}).then(function(res){if(res.data){window.flash('Request Approved');setShow(false);fetch();}});};var Reject=function Reject(){axios.post(\"\".concat(API_URL,\"/request_reject\"),{id:ModalInfo._id,name:ModalInfo.R_Emp_Name,email:ModalInfo.R_Emp_Email,item:ModalInfo.Item,comment:comment}).then(function(res){if(res.data){window.flash('Request Rejected');setShow(false);fetch();}});};return/*#__PURE__*/_jsxs(Modal,{show:showModal,onHide:function onHide(){setShow(false);},children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Details\"})}),/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(ModalBody,{children:/*#__PURE__*/_jsxs(\"ul\",{className:\"list-unstyled\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Requested by:\"}),\" \",ModalInfo.R_Emp_Name]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",ModalInfo.R_Emp_Email]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Item:\"}),\" \",ModalInfo.Item]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Quantity:\"}),\" \",ModalInfo.Quantity]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Duration:\"}),\" \",ModalInfo.Duration]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Reason:\"}),\" \",ModalInfo.Reason]}),/*#__PURE__*/_jsx(\"li\",{className:\"mt-3\",children:/*#__PURE__*/_jsx(Form.Group,{children:/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",value:comment,onChange:function onChange(event){setcomment(event.target.value);},placeholder:\"Additional Comments\",row:6})})})]})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Btn,{className:\"btn-success\",onClick:function onClick(){Approve();},children:\"Approve\"}),/*#__PURE__*/_jsx(Btn,{className:\"btn-danger\",onClick:Reject,children:\"Reject\"})]})]})]});};return/*#__PURE__*/_jsxs(_Fragment,{children:[showModal?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ModalContent,{})}):null,/*#__PURE__*/_jsxs(Container,{children:[allrequest.length>0&&/*#__PURE__*/_jsxs(TableStyle,{responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),arr.map(function(_,index){return/*#__PURE__*/_jsx(\"th\",{children:_},index);})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:allrequest.map(function(request,index){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){SetInfo(request);setShow(true);},children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsxs(\"td\",{children:[request.R_Emp_Name,/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"td\",{children:request.R_Emp_Email}),/*#__PURE__*/_jsx(\"td\",{children:moment(request.Added).format('Do MMMM YYYY')}),/*#__PURE__*/_jsx(\"td\",{children:request.Item}),/*#__PURE__*/_jsx(\"td\",{children:request.Quantity}),/*#__PURE__*/_jsx(\"td\",{children:request.Duration})]})});})})]}),allrequest.length===0&&/*#__PURE__*/_jsx(\"h2\",{children:\"No Requests.\"})]})]});};export default RequestTable;var TableStyle=styled(Table)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\nth {background: #1F386B; color:white;}\\ntr{\\n    cursor:pointer;\\n    &:hover{\\n        // background: #1F386B;\\n    }\\n}\\n\"])));var Btn=styled(Button)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n&:hover{\\n    background: #0e8ccc;\\n}\\n\\n\"])));var ModalBody=styled(Modal.Body)(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n\\nli{\\n    padding:5px;\\n}\\n\\n\"])));","map":{"version":3,"sources":["/home/amir/Desktop/New File/IMS/client/src/components/Request_Table/RequestTable.js"],"names":["React","useEffect","useState","axios","Table","Button","Container","Modal","Form","moment","styled","API_URL","RequestTable","arr","allrequest","setrequests","fetch","get","withCredentials","then","res","console","log","data","showModal","setShow","ModalInfo","SetInfo","ModalContent","comment","setcomment","Approve","post","id","_id","window","flash","Reject","name","R_Emp_Name","email","R_Emp_Email","item","Item","Quantity","Duration","Reason","event","target","value","length","map","_","index","request","Added","format","TableStyle","Btn","ModalBody","Body"],"mappings":"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","sourcesContent":["import React , { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport {Table,Button,Container, Modal, Form} from 'react-bootstrap';\nimport moment from 'moment';\nimport styled from 'styled-components';\nimport { API_URL } from '../../utils/constant';\n\nconst RequestTable = () => {\n   const arr = ['Requested By','Email','Date Requested','Item Name','Quantity','Duration']\n    const [allrequest, setrequests] = useState([])\n    // const [open, setOpen] = useState(false);\n\n    async function fetch(){\n        await axios.get(`${API_URL}/get_all_request`, {\n             withCredentials: true\n         }).then((res)=>{\n             console.log(res.data);\n             \n             setrequests(res.data);\n             \n         })\n        }\n    // var requests = []\n    useEffect( () =>{\n    \n    fetch()\n    },[])\n    const [showModal, setShow] = useState(false)\n    const [ModalInfo, SetInfo] = useState({})\n    const ModalContent = ()=>{\n       const [comment , setcomment] = useState(\"\")\n\n        const Approve = ()=>{\n            console.log('Approve Request')\n            axios.post(`${API_URL}/request_approve`, {id : ModalInfo._id}).then(\n                (res)=>{\n                    if(res.data)\n                    { \n                        window.flash('Request Approved')\n                        setShow(false)\n                        fetch()\n                    }\n                }\n            )\n        } \n\n\n        const Reject = ()=>{\n            axios.post(`${API_URL}/request_reject`, {\n                id : ModalInfo._id,\n                name: ModalInfo.R_Emp_Name,\n                email : ModalInfo.R_Emp_Email,\n                item : ModalInfo.Item,\n                comment : comment\n            }).then(\n                (res)=>{\n                    if(res.data)\n                    { \n                        window.flash('Request Rejected')\n                        setShow(false)\n                        fetch()\n                    }\n                }\n            )\n        } \n\n        return(\n            <Modal show = {showModal} onHide ={() => {setShow(false)}}>\n                <Modal.Header closeButton>\n                    <Modal.Title>\n                        Details \n                    </Modal.Title>\n                    </Modal.Header>\n                    <Form>\n                       \n                    <ModalBody>\n                        <ul className=\"list-unstyled\">\n                            <li><strong>Requested by:</strong> {ModalInfo.R_Emp_Name}</li>\n                            <li><strong>Email:</strong> {ModalInfo.R_Emp_Email}</li>\n                            <li><strong>Item:</strong> {ModalInfo.Item}</li>\n                            <li><strong>Quantity:</strong> {ModalInfo.Quantity}</li>\n                            <li><strong>Duration:</strong> {ModalInfo.Duration}</li>\n                            <li><strong>Reason:</strong> {ModalInfo.Reason}</li>\n                            <li className=\"mt-3\">\n                                    <Form.Group>\n                                        <Form.Control as=\"textarea\" value ={comment} onChange={(event)=>{ setcomment(event.target.value) }}  placeholder = \"Additional Comments\"  row={6}/>\n                                    </Form.Group>\n                                \n                            </li>\n                        </ul>\n                    </ModalBody>\n\n                \n                <Modal.Footer>\n                    <Btn className = \"btn-success\" onClick = {() => {Approve()}}>Approve</Btn>\n                    <Btn className=\"btn-danger\" onClick = {Reject}>Reject</Btn>\n                        \n                </Modal.Footer>\n                </Form>\n            </Modal>\n        );\n        \n\n    }\n    \n\n\n    return(\n        <>\n        {showModal?\n            <div>\n                <ModalContent/>\n            </div>\n        :null   \n        }\n\n\n\n     <Container>\n         { allrequest.length > 0 &&\n        <TableStyle responsive>\n        <thead>\n            <tr>\n             <th>#</th>\n            {arr.map((_, index) => (\n              <th key={index}>{_}</th>\n            ))}\n            \n          </tr>\n        </thead>\n        <tbody>\n          {allrequest.map((request, index) =>{\n            return(\n            <>\n            <tr onClick = {() => {SetInfo(request); setShow(true);} }>\n                <td>{index+1}</td>\n                <td>{request.R_Emp_Name}<br/></td>\n                <td>{request.R_Emp_Email}</td>\n                <td>{moment(request.Added).format('Do MMMM YYYY')}</td>\n                <td>{request.Item}</td>\n                <td>{request.Quantity}</td>\n                <td>{request.Duration}</td>\n                \n            </tr>\n            \n           \n            </>\n            )\n          })}\n        </tbody>\n      </TableStyle>\n      \n      }\n      {\n          allrequest.length === 0 && <h2>No Requests.</h2>\n      }\n        \n      </Container>\n      </>\n    )\n\n\n}\n\n\nexport default RequestTable\n\nconst TableStyle = styled(Table)`\nth {background: #1F386B; color:white;}\ntr{\n    cursor:pointer;\n    &:hover{\n        // background: #1F386B;\n    }\n}\n`;\n\nconst Btn = styled(Button)`\n&:hover{\n    background: #0e8ccc;\n}\n\n`;\n\nconst ModalBody = styled(Modal.Body)`\n\nli{\n    padding:5px;\n}\n\n`;"]},"metadata":{},"sourceType":"module"}