{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/amir/Desktop/New File/inventory_deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _regeneratorRuntime from\"/home/amir/Desktop/New File/inventory_deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/amir/Desktop/New File/inventory_deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/amir/Desktop/New File/inventory_deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7;import React,{useEffect,useState}from'react';import axios from'axios';import{Row,Table,Button,Container,Modal,Form,Card}from'react-bootstrap';import styled from'styled-components';import MainHeader from'../header/Header_pages';import{useParams,useHistory}from'react-router';import{API_URL}from'../../utils/constant';// import { func } from 'prop-types';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var IssueItems=function IssueItems(){var history=useHistory();var arr=['Name','Type','Description','Quantity'];// const [items, setitems] = useState([])\nvar _useParams=useParams(),id=_useParams.id;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),requested=_useState2[0],setRequested=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),iName=_useState4[0],setItemName=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),inventory=_useState6[0],setInventory=_useState6[1];function fetch(){return _fetch.apply(this,arguments);}function _fetch(){_fetch=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"\".concat(API_URL,\"/\")+id+'/issuerequest',{withCredentials:true}).then(function(res){console.log(\"IN ISSUE_ITEMS.JS BLABLA\",res.data);if(res.data.code===404){history.push('/storedashboard');}else if(res.data.code===200){console.log(res.data);setRequested(res.data.requested_item);setInventory(res.data.inventory_items);setItemName(res.data.requested_item.Item);}// // // // // // // check quantity update wali cheez main try kr rahi thi didnt get\n});case 2:case\"end\":return _context.stop();}}},_callee);}));return _fetch.apply(this,arguments);}var onPurchase=function onPurchase(){axios.post(\"\".concat(API_URL,\"/request_forward_purchase\"),{id:id}).then(function(res){if(res.data){setShow(false);console.log(\"Request Forwarded to Purchase Department\");window.flash('Request Forwarded to Purchase Department');history.push('/storedashboard');}});};var onCancel=function onCancel(_id,email,name,item){axios.post(\"\".concat(API_URL,\"/request_cancel\"),{id:_id,email:email,name:name,item:item}).then(function(res){if(res.data){window.flash('Request Cancelled');fetch();history.push('/storedashboard');}});};useEffect(function(){fetch();},[]);// /////////////////////////////////////////////////\nvar _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showModal=_useState8[0],setShow=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),ModalInfo=_useState10[0],SetInfo=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),item_id=_useState12[0],set_item_id=_useState12[1];var ModalContent=function ModalContent(){var _useState13=useState(ModalInfo.Item_Name),_useState14=_slicedToArray(_useState13,2),name=_useState14[0],setname=_useState14[1];var _useState15=useState(ModalInfo.Item_Quantity),_useState16=_slicedToArray(_useState15,2),quantity=_useState16[0],setquantity=_useState16[1];var _useState17=useState(ModalInfo.Item_Description),_useState18=_slicedToArray(_useState17,2),description=_useState18[0],setdescription=_useState18[1];var _useState19=useState(ModalInfo.Item_Type),_useState20=_slicedToArray(_useState19,2),type=_useState20[0],settype=_useState20[1];var UpdateRecord=function UpdateRecord(event,q){// event.preventDefault() oyeeee abbb bass bhot hogaya ... commit karo aur so jao \nconsole.log('Quantity : ',ModalInfo.Item_Quantity-Quantity);axios.post(\"\".concat(API_URL,\"/issued_item\"),{quantity:Quantity,request_id:requested._id,item_id:item_id}).then(function(res){setShow(false);console.log(res);if(res.data.code===404){window.scrollTo(0,0);window.flash('Item Quantity Invalid','danger');}else if(res.data.code===200){window.scrollTo(0,0);window.flash('Item Successfully Issued ');history.push('/storedashboard');}//  setRequested(res.data);\n});};var _useState21=useState(0),_useState22=_slicedToArray(_useState21,2),Quantity=_useState22[0],setQuantity=_useState22[1];return/*#__PURE__*/_jsxs(Modal,{show:showModal,onHide:function onHide(){setShow(false);},children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Details\"})}),/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsx(\"h5\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Requested Item Information\"})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Item Name: \",requested.Item]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Quantity Requested: \",requested.Quantity]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Duration of Request: \",requested.Duration]}),/*#__PURE__*/_jsx(\"h5\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Inventory Information\"})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Item Name: \",ModalInfo.Item_Name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Quantity Available: \",ModalInfo.Item_Quantity]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Set Issue Quantity\"})}),/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsx(Form.Control,{type:\"number\",value:Quantity,onChange:function onChange(event){setQuantity(event.target.value);}})})]}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Btn,{onClick:function onClick(){return UpdateRecord(ModalInfo.Item_Quantity-Quantity);},type:\"submit\",className:\"btn-success\",children:\"Issue\"})})]});};return/*#__PURE__*/_jsxs(_Fragment,{children:[showModal?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ModalContent,{})}):null,/*#__PURE__*/_jsx(MainHeader,{}),/*#__PURE__*/_jsxs(MainContainer,{children:[/*#__PURE__*/_jsx(Row1,{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Store Inventory\"})}),/*#__PURE__*/_jsx(Row1,{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:\"Requested Item Information\"}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Card.Title,{children:[\"Item Name: \",requested.Item]}),/*#__PURE__*/_jsxs(Card.Title,{children:[\"Quantity Requested: \",requested.Quantity]}),/*#__PURE__*/_jsxs(Card.Title,{children:[\"Duration of Request: \",requested.Duration]})]}),/*#__PURE__*/_jsxs(Card.Footer,{children:[/*#__PURE__*/_jsx(Btn,{className:\"btn-success\",onClick:function onClick(){onPurchase();},children:\"Send To Purchase Department\"}),/*#__PURE__*/_jsx(Btn,{onClick:function onClick(){return onCancel(requested._id,requested.R_Emp_Email,requested.R_Emp_Name,requested.Item);},className:\"btn-danger\",children:\"Cancel\"})]})]})}),/*#__PURE__*/_jsx(Row1,{className:\"float-right\",children:/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(FormLabel,{children:\"Search \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Search\",name:\"searchbar\",value:iName,onChange:function onChange(event){setItemName(event.target.value);}})]})})}),inventory.length>0&&/*#__PURE__*/_jsxs(TableStyle,{responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),arr.map(function(_,index){return/*#__PURE__*/_jsx(\"th\",{children:_},index);}),/*#__PURE__*/_jsx(\"th\",{})]})})}),/*#__PURE__*/_jsx(\"tbody\",{children:inventory.map(function(item,index){if(item.Item_Name.toLowerCase().includes(iName.toLowerCase())||item.Item_Description.toLowerCase().includes(iName.toLowerCase()))return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsxs(\"td\",{children:[item.Item_Name,/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"td\",{children:item.Item_Type}),/*#__PURE__*/_jsx(\"td\",{children:item.Item_Description}),/*#__PURE__*/_jsx(\"td\",{children:item.Item_Quantity}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Btn,{onClick:function onClick(){SetInfo(item);set_item_id(item._id);setShow(true);},children:\"Confirm Issue\"})})]})});// else return(<tr></tr>)\n})})]}),inventory.length===0&&/*#__PURE__*/_jsx(\"h2\",{className:\"mt-2\",children:\"No Items.\"})]})]});};export default IssueItems;var Row1=styled(Row)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    padding:100px 16px 0px 0px;\\n    \\n\\n\\n\"])));var MainContainer=styled(Container)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    width: 100%;\\n  height: auto;\\n  min-height: 100%;\\n  min-height: 100vh;\\n\"])));var TableStyle=styled(Table)(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\nth {background: #1F386B; color:white;}\\ntr{\\n    cursor:pointer;\\n    &:hover{\\n        background: lightgray;\\n    }\\n}\\n\"])));var Btn=styled(Button)(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\nbackground :#EFBB20;\\nmargin-left : 10px;\\nborder: none; \\n&:hover{\\nbackground: #0e8ccc;\\n}\\n\"])));var ModalBody=styled(Modal.Body)(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n\\nli{\\n    padding:10px;\\n}\\n\\n\"])));var FormGroup=styled(Form.Group)(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\ndisplay : flex\\n\\n\"])));var FormLabel=styled(Form.Label)(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\nfont-size : 25px\\n\\n\"])));","map":{"version":3,"sources":["/home/amir/Desktop/New File/inventory_deploy/client/src/components/issue/Issue_items.js"],"names":["React","useEffect","useState","axios","Row","Table","Button","Container","Modal","Form","Card","styled","MainHeader","useParams","useHistory","API_URL","IssueItems","history","arr","id","requested","setRequested","iName","setItemName","inventory","setInventory","fetch","get","withCredentials","then","res","console","log","data","code","push","requested_item","inventory_items","Item","onPurchase","post","setShow","window","flash","onCancel","_id","email","name","item","showModal","ModalInfo","SetInfo","item_id","set_item_id","ModalContent","Item_Name","setname","Item_Quantity","quantity","setquantity","Item_Description","description","setdescription","Item_Type","type","settype","UpdateRecord","event","q","Quantity","request_id","scrollTo","setQuantity","Duration","target","value","R_Emp_Email","R_Emp_Name","length","map","_","index","toLowerCase","includes","Row1","MainContainer","TableStyle","Btn","ModalBody","Body","FormGroup","Group","FormLabel","Label"],"mappings":"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","sourcesContent":["import React , { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport {Row,Table,Button,Container, Modal, Form, Card} from 'react-bootstrap';\nimport styled from 'styled-components';\nimport MainHeader from '../header/Header_pages';\nimport { useParams, useHistory } from 'react-router';\nimport { API_URL } from '../../utils/constant';\n\n// import { func } from 'prop-types';\n\n\nconst IssueItems = () => \n{\n    const history = useHistory();\n    const arr = ['Name','Type','Description','Quantity']\n    // const [items, setitems] = useState([])\n\n    const {id} = useParams();\n  \n        \n    const [requested,setRequested] = useState({\n    })\n    const [iName, setItemName] = useState(\"\")\n    const [inventory,setInventory] = useState([])\n    async function fetch()\n       { \n            await axios.get(`${API_URL}/` +id+ '/issuerequest', {\n                withCredentials: true\n        }).then((res)=>{\n            \n            console.log(\"IN ISSUE_ITEMS.JS BLABLA\",res.data); \n            if(res.data.code === 404)\n            {\n                history.push('/storedashboard')\n            }\n            else if (res.data.code === 200)\n            {   \n                console.log(res.data)\n                setRequested(res.data.requested_item);\n                setInventory(res.data.inventory_items);\n                setItemName(res.data.requested_item.Item);\n            }\n            \n           // // // // // // // check quantity update wali cheez main try kr rahi thi didnt get\n        })\n       }\n   \n\n    const onPurchase = ()=>{\n        axios.post(`${API_URL}/request_forward_purchase`, { id : id}).then(\n            (res)=>{\n                if(res.data)\n                { \n                    setShow(false)\n                    console.log(\"Request Forwarded to Purchase Department\")\n                    window.flash('Request Forwarded to Purchase Department')\n                    history.push('/storedashboard');\n                }\n            }\n        )\n\n    }\n        \n    const onCancel = (_id, email, name, item) => {\n        axios.post(`${API_URL}/request_cancel`, {id : _id, email : email, name : name, item : item}).then(\n            (res)=>{\n                if(res.data)\n                { \n                    window.flash('Request Cancelled');\n                    fetch();\n                    history.push('/storedashboard');\n                }\n            }\n        )\n    }\n\n    \n\n    useEffect( () =>{\n       fetch()\n  \n    },[])\n    // /////////////////////////////////////////////////\n    const [showModal, setShow] = useState(false)\n    const [ModalInfo, SetInfo] = useState({})\n    const [item_id, set_item_id] = useState(\"\")\n    const ModalContent = ()=>{\n       \n        const [name, setname] = useState(ModalInfo.Item_Name)\n        const [quantity, setquantity] = useState(ModalInfo.Item_Quantity)\n        const [description, setdescription] = useState(ModalInfo.Item_Description)\n        const [type, settype] = useState(ModalInfo.Item_Type)\n \n        const UpdateRecord = (event,q)=>{\n            // event.preventDefault() oyeeee abbb bass bhot hogaya ... commit karo aur so jao \n            console.log('Quantity : ', ModalInfo.Item_Quantity - Quantity)     \n         axios.post(`${API_URL}/issued_item`,\n         { quantity : Quantity, request_id : requested._id,  item_id: item_id})\n             .then(\n             (res) => {\n                 setShow(false);\n                 console.log(res);\n                 if (res.data.code === 404)\n                 {\n                    window.scrollTo(0, 0)\n                     window.flash('Item Quantity Invalid', 'danger')\n                 }\n                 else if (res.data.code === 200)\n                 { \n                    window.scrollTo(0, 0)\n                     window.flash('Item Successfully Issued ')\n                     history.push('/storedashboard');\n                 }  \n                //  setRequested(res.data);\n              \n             } \n         )\n         \n        }\n            \n        const [Quantity, setQuantity] = useState(0)\n\n        \n        \n         return(\n             <Modal show = {showModal} onHide ={() => {setShow(false)}}>\n                 <Modal.Header closeButton>\n                     <Modal.Title>\n                         Details \n                     </Modal.Title>\n                     </Modal.Header>\n                <ModalBody>\n             \n                <h5><strong>Requested Item Information</strong></h5>\n                <p>Item Name: {requested.Item}</p>\n                <p>Quantity Requested: {requested.Quantity}</p>\n                <p>Duration of Request: {requested.Duration}</p>\n\n                <h5><strong>Inventory Information</strong></h5> \n                <p>Item Name: {ModalInfo.Item_Name}</p> \n                <p>Quantity Available: {ModalInfo.Item_Quantity}</p> \n                \n                <p><strong>Set Issue Quantity</strong></p> \n               \n                <Form>\n                    <Form.Control type=\"number\" value = {Quantity} onChange={(event)=>{setQuantity(event.target.value)}}  />    \n                </Form>\n\n                </ModalBody>\n                 <Modal.Footer>\n                    <Btn onClick={()=>UpdateRecord(ModalInfo.Item_Quantity - Quantity)} type =\"submit\" className = \"btn-success\">Issue</Btn>              \n                </Modal.Footer>\n               \n            </Modal>\n        );\n        \n\n    }\n    \n\n \n   \n\n    return(\n        <>\n        \n         {     showModal?\n                 <div>\n                     <ModalContent/>\n                 </div>\n             :null   \n         }\n        \n        <MainHeader/>  \n        \n\n        <MainContainer>\n            <Row1>\n                <h1>Store Inventory</h1>\n\n            </Row1>\n            <Row1>\n                <Card>\n                <Card.Header>Requested Item Information</Card.Header>\n                <Card.Body>\n                <Card.Title>Item Name: {requested.Item}</Card.Title>\n                <Card.Title>Quantity Requested: {requested.Quantity}</Card.Title>\n                <Card.Title>Duration of Request: {requested.Duration}</Card.Title>\n                </Card.Body>\n                {/* <Btn onClick = {() => {SetInfo(request); setShow(true);} } className = \"mr-1\"> Details </Btn> */}\n                {/* <Btn onClick={()=>onIssue(request._id)} className = \"btn-success mr-1\">Issue</Btn> */}\n                <Card.Footer>\n                <Btn className=\"btn-success\" onClick= {() => {onPurchase()}}>Send To Purchase Department</Btn>\n                <Btn onClick={()=>onCancel(requested._id, requested.R_Emp_Email, requested.R_Emp_Name, requested.Item)} className=\"btn-danger\">Cancel</Btn>\n                </Card.Footer></Card>\n            </Row1>\n            <Row1 className=\"float-right\" >\n        \n        <Form>\n             \n             <FormGroup>\n                    \n                <FormLabel>Search </FormLabel>  \n                 <Form.Control type=\"text\" placeholder=\"Search\" name=\"searchbar\" value={iName} onChange={(event)=>{ setItemName(event.target.value)}} />\n                 \n                \n              \n                \n             </FormGroup>\n             \n        </Form>       \n            \n                \n          \n         \n         \n         </Row1>\n     \n            { \n                inventory.length > 0 &&\n                <TableStyle responsive>\n            \n                <thead>\n                <>\n                    <tr>\n                        <th>#</th>\n                        {arr.map((_, index) => (\n                        <th key={index}>{_}</th>\n                        ))}\n                        \n                        \n                        <th></th>\n                    </tr>\n                </>\n                </thead>\n        \n            \n                <tbody>\n                {\n                    inventory.map((item, index) => {\n                        if (item.Item_Name.toLowerCase().includes(iName.toLowerCase()) || item.Item_Description.toLowerCase().includes(iName.toLowerCase()) )\n                        return(\n                        \n                        <>\n                        <tr>\n                            <td>{index+1}</td>\n                            <td>{item.Item_Name}<br/></td>\n                            <td>{item.Item_Type}</td>\n                            <td>{item.Item_Description}</td>\n                            <td>{item.Item_Quantity}</td> \n                            <td><Btn onClick = {()=>{ SetInfo(item); set_item_id(item._id); setShow(true); }} >Confirm Issue</Btn></td>\n                                \n               \n                        </tr>\n            \n           \n                        </>\n                    )\n                    // else return(<tr></tr>)\n\n                    }\n                    )\n                }\n            </tbody>\n      \n            </TableStyle>\n      \n            }\n\n            {\n                inventory.length === 0 && <h2 className=\"mt-2\">No Items.</h2>\n            }\n        \n            \n        </MainContainer>\n        \n        </>\n    )\n\n\n}\n\nexport default IssueItems;\n\nconst Row1 = styled(Row)`\n    padding:100px 16px 0px 0px;\n    \n\n\n`;\nconst MainContainer = styled(Container)`\n    width: 100%;\n  height: auto;\n  min-height: 100%;\n  min-height: 100vh;\n`;\nconst TableStyle = styled(Table)`\nth {background: #1F386B; color:white;}\ntr{\n    cursor:pointer;\n    &:hover{\n        background: lightgray;\n    }\n}\n`;\n\nconst Btn = styled(Button)`\nbackground :#EFBB20;\nmargin-left : 10px;\nborder: none; \n&:hover{\nbackground: #0e8ccc;\n}\n`;\n\nconst ModalBody = styled(Modal.Body)`\n\nli{\n    padding:10px;\n}\n\n`;\n\n\nconst FormGroup = styled(Form.Group)`\ndisplay : flex\n\n`;\n\n\nconst FormLabel = styled(Form.Label)`\nfont-size : 25px\n\n`;"]},"metadata":{},"sourceType":"module"}