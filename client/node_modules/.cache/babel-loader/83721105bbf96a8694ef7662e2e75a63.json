{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/amir/Desktop/New File/IMS/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _regeneratorRuntime from\"/home/amir/Desktop/New File/IMS/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/amir/Desktop/New File/IMS/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/amir/Desktop/New File/IMS/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject;import React,{useEffect,useState}from'react';import axios from'axios';import{Table,Container,OverlayTrigger,Tooltip}from'react-bootstrap';import styled from'styled-components';import{useHistory}from'react-router-dom';import{API_URL}from'../../utils/constant';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var RequestTable=function RequestTable(){var arr=['Requested By','Email','Item Name','Quantity','Duration'];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allrequest=_useState2[0],setrequests=_useState2[1];var history=useHistory();function fetch(){return _fetch.apply(this,arguments);}function _fetch(){_fetch=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"\".concat(API_URL,\"/storerequests\"),{withCredentials:true}).then(function(res){console.log(res.data);setrequests(res.data);});case 2:case\"end\":return _context.stop();}}},_callee);}));return _fetch.apply(this,arguments);}var onIssue=function onIssue(id){console.log(\"STORE TABLE MAIN ID FOR PARAMS\",id);history.push('/'+id+'/issuerequest');};// const onPurchase = (id)=>{\n//     axios.post(`${API_URL}/request_forward_purchase`, { id : id}).then(\n//         (res)=>{\n//             if(res.data)\n//             { \n//                 setShow(false)\n//                 window.flash('Request Forwarded to Purchase Department')\n//                 fetch();\n//             }\n//         }\n//     )\n// }\n// const onCancel = (_id, email, name, item) => {\n//     axios.post(`${API_URL}/request_cancel`, {id : _id, email : email, name : name, item : item}).then(\n//         (res)=>{\n//             if(res.data)\n//             { \n//                 window.flash('Request Cancelled');\n//                 fetch();\n//             }\n//         }\n//     )\n// }\n// var requests = []\nuseEffect(function(){fetch();},[]);// const [showModal, setShow] = useState(false)\n// const [ModalInfo, SetInfo] = useState({})\n// const ModalContent = ()=>{\n//     return(\n//         <Modal show = {showModal} onHide ={() => {setShow(false)}}>\n//             <Modal.Header closeButton>\n//                 <Modal.Title>\n//                     Details \n//                 </Modal.Title>\n//                        </Modal.Header>\n//                 <ModalBody>\n//                     <ul className=\"list-unstyled\">\n//                         <li><strong>Requested by:</strong> {ModalInfo.R_Emp_Name}</li>\n//                         <li><strong>Email:</strong> {ModalInfo.R_Emp_Email}</li>\n//                         <li><strong>Item:</strong> {ModalInfo.Item}</li>\n//                         <li><strong>Quantity:</strong> {ModalInfo.Quantity}</li>\n//                         <li><strong>Duration:</strong> {ModalInfo.Duration}</li>\n//                         <li><strong>Reason:</strong> {ModalInfo.Reason}</li>\n//                         <li className=\"mt-3\">\n//                             <Form>\n//                                 <Form.Group>\n//                                     <Form.Control as=\"textarea\" placeholder = \"Additional Comments\" row={6}/>\n//                                 </Form.Group>\n//                             </Form>\n//                         </li>\n//                     </ul>\n//                 </ModalBody>\n//             <Modal.Footer>\n//                 {/* <Btn className = \"btn-success\">Approve</Btn>\n//                 <Btn className=\"btn-danger\">Reject</Btn> */}\n//                 <Btn className=\"btn-success\" onClick= {() => {onPurchase()}}>Send To Purchase Department</Btn>\n//             </Modal.Footer>\n//         </Modal>\n//     );\n// }\nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Container,{children:[allrequest.length>0&&/*#__PURE__*/_jsxs(TableStyle,{responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),arr.map(function(_,index){return/*#__PURE__*/_jsx(\"th\",{children:_},index);}),/*#__PURE__*/_jsx(\"th\",{})]})})}),/*#__PURE__*/_jsx(\"tbody\",{children:allrequest.map(function(request,index){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(OverlayTrigger,{placement:\"bottom\",overlay:/*#__PURE__*/_jsx(Tooltip,{id:\"button-tooltip-2\",children:\"Click to see Details\"}),children:/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){onIssue(request._id);},children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsxs(\"td\",{children:[request.R_Emp_Name,/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"td\",{children:request.R_Emp_Email}),/*#__PURE__*/_jsx(\"td\",{children:request.Item}),/*#__PURE__*/_jsx(\"td\",{children:request.Quantity}),/*#__PURE__*/_jsx(\"td\",{children:request.Duration})]},index)})});})})]}),allrequest.length===0&&/*#__PURE__*/_jsx(\"h2\",{children:\"No Requests.\"})]})});};export default RequestTable;var TableStyle=styled(Table)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\nth {background: #1F386B; color:white;}\\ntr{\\n    cursor:pointer;\\n    &:hover{\\n        background: lightgray;\\n    }\\n}\\n\"])));// const Btn = styled(Button)`\n// &:hover{\n//     background: #0e8ccc;\n// }\n// `;\n// const ModalBody = styled(Modal.Body)`\n// li{\n//     padding:5px;\n// }\n// `;","map":{"version":3,"sources":["/home/amir/Desktop/New File/IMS/client/src/components/storeTable/Store_Table.js"],"names":["React","useEffect","useState","axios","Table","Container","OverlayTrigger","Tooltip","styled","useHistory","API_URL","RequestTable","arr","allrequest","setrequests","history","fetch","get","withCredentials","then","res","console","log","data","onIssue","id","push","length","map","_","index","request","_id","R_Emp_Name","R_Emp_Email","Item","Quantity","Duration","TableStyle"],"mappings":"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","sourcesContent":["import React , { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport {Table,Container,OverlayTrigger,Tooltip} from 'react-bootstrap';\nimport styled from 'styled-components';\nimport {useHistory} from 'react-router-dom';\nimport { API_URL } from '../../utils/constant';\n\nconst RequestTable = () => {\n    const arr = ['Requested By','Email','Item Name','Quantity','Duration']\n    const [allrequest, setrequests] = useState([])\n    const history = useHistory()\n    async function fetch(){\n        await axios.get(`${API_URL}/storerequests`, {\n            withCredentials: true\n        }).then((res)=>{\n            console.log(res.data);\n            setrequests(res.data);\n            \n        })\n    } \n    const onIssue = (id)=>{\n        \n        console.log(\"STORE TABLE MAIN ID FOR PARAMS\",id)\n        history.push('/'+id+'/issuerequest')\n    }\n\n\n    // const onPurchase = (id)=>{\n    //     axios.post(`${API_URL}/request_forward_purchase`, { id : id}).then(\n    //         (res)=>{\n    //             if(res.data)\n    //             { \n    //                 setShow(false)\n    //                 window.flash('Request Forwarded to Purchase Department')\n    //                 fetch();\n    //             }\n    //         }\n    //     )\n\n    // }\n        \n    // const onCancel = (_id, email, name, item) => {\n    //     axios.post(`${API_URL}/request_cancel`, {id : _id, email : email, name : name, item : item}).then(\n    //         (res)=>{\n    //             if(res.data)\n    //             { \n    //                 window.flash('Request Cancelled');\n    //                 fetch();\n\n    //             }\n    //         }\n    //     )\n    // }\n\n    \n\n    // var requests = []\n    useEffect( () =>{\n       \n        \n    fetch()\n    },[])\n\n\n    // const [showModal, setShow] = useState(false)\n    // const [ModalInfo, SetInfo] = useState({})\n    // const ModalContent = ()=>{\n       \n    //     return(\n    //         <Modal show = {showModal} onHide ={() => {setShow(false)}}>\n    //             <Modal.Header closeButton>\n    //                 <Modal.Title>\n    //                     Details \n    //                 </Modal.Title>\n    //                        </Modal.Header>\n    //                 <ModalBody>\n    //                     <ul className=\"list-unstyled\">\n    //                         <li><strong>Requested by:</strong> {ModalInfo.R_Emp_Name}</li>\n    //                         <li><strong>Email:</strong> {ModalInfo.R_Emp_Email}</li>\n    //                         <li><strong>Item:</strong> {ModalInfo.Item}</li>\n    //                         <li><strong>Quantity:</strong> {ModalInfo.Quantity}</li>\n    //                         <li><strong>Duration:</strong> {ModalInfo.Duration}</li>\n    //                         <li><strong>Reason:</strong> {ModalInfo.Reason}</li>\n    //                         <li className=\"mt-3\">\n    //                             <Form>\n    //                                 <Form.Group>\n    //                                     <Form.Control as=\"textarea\" placeholder = \"Additional Comments\" row={6}/>\n    //                                 </Form.Group>\n    //                             </Form>\n    //                         </li>\n    //                     </ul>\n    //                 </ModalBody>\n\n                \n    //             <Modal.Footer>\n    //                 {/* <Btn className = \"btn-success\">Approve</Btn>\n    //                 <Btn className=\"btn-danger\">Reject</Btn> */}\n    //                 <Btn className=\"btn-success\" onClick= {() => {onPurchase()}}>Send To Purchase Department</Btn>\n                        \n    //             </Modal.Footer>\n    //         </Modal>\n    //     );\n        \n\n    // }\n    \n\n\n    return(\n        <>\n        {/* {showModal?\n            <div>\n                <ModalContent/>\n            </div>\n        :null   \n        } */}\n\n     <Container>\n         { allrequest.length > 0 &&\n        <TableStyle responsive>\n        <thead>\n            <>\n            <tr>\n             <th>#</th>\n            {arr.map((_, index) => (\n              <th key={index}>{_}</th>\n            ))}\n            <th></th>\n          </tr>\n</>\n        </thead>\n        <tbody>\n          {allrequest.map((request, index) =>{\n            return(\n            <>\n            <OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"button-tooltip-2\">Click to see Details</Tooltip>} >\n            <tr key={index} onClick = {() => {onIssue(request._id)} }>\n                <td>{index+1}</td>\n                <td>{request.R_Emp_Name}<br/></td>\n                <td>{request.R_Emp_Email}</td>\n                \n                <td>{request.Item}</td>\n                <td>{request.Quantity}</td>\n                <td>{request.Duration}</td>\n                    \n                {/* <td>\n                    <Btn onClick = {() => {SetInfo(request); setShow(true);} } className = \"mr-1\"> Details </Btn>\n                    <Btn onClick={()=>onIssue(request._id)} className = \"btn-success mr-1\">Issue</Btn>\n                <Btn onClick={()=>onCancel(request._id, request.R_Emp_Email, request.R_Emp_Name, request.Item)} className=\"btn-danger\">Cancel</Btn>\n                </td> */}\n            </tr>\n            </OverlayTrigger>\n           \n            </>\n            )\n          })}\n        </tbody>\n      </TableStyle>\n      \n      }\n      {\n          allrequest.length === 0 && <h2>No Requests.</h2>\n      }\n        \n      </Container>\n      </>\n    )\n\n\n}\n\n\nexport default RequestTable\n\nconst TableStyle = styled(Table)`\nth {background: #1F386B; color:white;}\ntr{\n    cursor:pointer;\n    &:hover{\n        background: lightgray;\n    }\n}\n`;\n\n// const Btn = styled(Button)`\n// &:hover{\n//     background: #0e8ccc;\n// }\n\n// `;\n\n// const ModalBody = styled(Modal.Body)`\n\n// li{\n//     padding:5px;\n// }\n\n// `;"]},"metadata":{},"sourceType":"module"}